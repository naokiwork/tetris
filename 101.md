# 改善点リスト 101

このドキュメントには、テトリスアプリケーションの修正案、改善案、機能改善、バグ修正をまとめています。

## 📝 修正案（20個）

### 1. ピース固定時の音響フィードバック
**場所**: `src/game.ts:243`
- ピース固定時に視覚的フィードバックはあるが、音響フィードバックがない
- **修正**: ピース固定時に短い音を再生する機能を追加。音量は設定で調整可能。

### 2. レベルアップ時の音響通知
**場所**: `src/score.ts:20`
- レベルアップ時に視覚的通知はあるが、音響通知がない
- **修正**: レベルアップ時に特別な音を再生する機能を追加。

### 3. ゲーム開始時のカウントダウン音
**場所**: `src/main.ts:97`
- カウントダウン時に音がない
- **修正**: カウントダウン時に各数字ごとに音を再生する機能を追加。

### 4. 一時停止中のUI改善強化
**場所**: `src/renderer.ts:550`
- 一時停止中のUIが基本的なもののみ
- **修正**: 一時停止中にゲームボード全体を半透明のオーバーレイで覆い、「PAUSED」のテキストをより目立つように表示。

### 5. キーリピートのカスタマイズ性向上
**場所**: `src/input.ts:11`
- キーリピートの遅延と間隔が固定値
- **修正**: 設定画面でキーリピートの遅延（REPEAT_DELAY）と間隔（REPEAT_INTERVAL）をユーザーが調整できるようにする。

### 6. ピース回転時の音響フィードバック
**場所**: `src/game.ts:195`
- ピース回転時に視覚的フィードバックはあるが、音響フィードバックがない
- **修正**: ピース回転時に短い音を再生する機能を追加。

### 7. ハードドロップ時の音響フィードバック
**場所**: `src/game.ts:145`
- ハードドロップ時に視覚的フィードバックはあるが、音響フィードバックがない
- **修正**: ハードドロップ時に短い音を再生する機能を追加。

### 8. ライン消去時の音響フィードバック
**場所**: `src/game.ts:252`
- ライン消去時に視覚的フィードバックはあるが、音響フィードバックがない
- **修正**: ライン消去時に短い音を再生する機能を追加。消去数に応じて音を変える。

### 9. コンボ表示の音響フィードバック
**場所**: `src/renderer.ts:529`
- コンボ表示が視覚的なもののみ
- **修正**: コンボ時に音を再生する機能を追加。コンボ数に応じて音を変える。

### 10. テトリスエフェクトの音響フィードバック
**場所**: `src/renderer.ts:518`
- テトリスエフェクトが視覚的なもののみ
- **修正**: テトリス時に特別な音を再生する機能を追加。

### 11. パーティクルエフェクトの強化
**場所**: `src/renderer.ts:2`
- ライン消去時のパーティクルエフェクトが基本的なもののみ
- **修正**: パーティクルエフェクトをより派手にし、色やサイズを多様化する。

### 12. ゲームオーバーアニメーションの強化
**場所**: `src/renderer.ts:6`
- ゲームオーバー時のアニメーションが基本的なもののみ
- **修正**: ゲームオーバー時のアニメーションをより派手にし、崩壊エフェクトを追加する。

### 13. 回転ヒントの視覚的改善
**場所**: `src/renderer.ts:5`
- 回転可能位置の表示が基本的なもののみ
- **修正**: 回転可能位置をより目立つように表示し、アニメーションを追加する。

### 14. スコア倍率表示のアニメーション
**場所**: `src/renderer.ts:300`
- スコア倍率表示が静的なもののみ
- **修正**: スコア倍率表示にアニメーションを追加し、レベルアップ時に強調する。

### 15. ボード境界線のアニメーション強化
**場所**: `src/renderer.ts:110`
- ボード境界線のアニメーションが基本的なもののみ
- **修正**: ボード境界線のアニメーションをより派手にし、色の変化を追加する。

### 16. ピース固定エフェクトの音響追加
**場所**: `src/game.ts:243`
- ピース固定時のエフェクトが視覚的なもののみ
- **修正**: ピース固定時に音を再生する機能を追加。

### 17. レベルアップエフェクトの音響追加
**場所**: `src/score.ts:20`
- レベルアップ時のエフェクトが視覚的なもののみ
- **修正**: レベルアップ時に音を再生する機能を追加。

### 18. ゲームオーバーエフェクトの音響追加
**場所**: `src/main.ts:114`
- ゲームオーバー時のエフェクトが視覚的なもののみ
- **修正**: ゲームオーバー時に音を再生する機能を追加。

### 19. ピースの影のグラデーション強化
**場所**: `src/renderer.ts:246`
- ピースの影のグラデーションが基本的なもののみ
- **修正**: ピースの影のグラデーションをより強調し、立体感を向上させる。

### 20. ゴーストピースの視覚的改善
**場所**: `src/renderer.ts:138`
- ゴーストピースの表示が基本的なもののみ
- **修正**: ゴーストピースをより目立つように表示し、アニメーションを追加する。

## 💡 改善案（20個）

### 21. ゲーム設定のUI改善
**場所**: `新規実装`
- 設定画面が存在しない
- **修正**: 設定画面を追加し、音量、キー配置、描画品質などを視覚的に設定できるようにする。

### 22. カスタムコントロール設定のUI
**場所**: `src/input.ts:52`
- キー配置のカスタマイズがUIからできない
- **修正**: 設定画面で各操作に割り当てるキーを視覚的に設定できるUIを追加。

### 23. ゲーム履歴の詳細表示UI
**場所**: `src/main.ts:200`
- 過去のゲーム結果の詳細が表示されない
- **修正**: 各ゲームの詳細（スコア、レベル、ライン数、プレイ時間、日時）を表示する履歴画面を追加。

### 24. エクスポート/インポート機能のUI改善
**場所**: `新規実装`
- エクスポート/インポート機能が基本的なもののみ
- **修正**: エクスポート/インポート機能を改善し、より使いやすくする。

### 25. 難易度選択のUI
**場所**: `src/game.ts:1`
- 難易度選択がUIからできない
- **修正**: ゲーム開始前に難易度を選択できるUIを追加（イージー、ノーマル、ハード、エキスパート）。

### 26. カスタムゲームモードのUI
**場所**: `src/game.ts:1`
- ゲームモード選択がUIからできない
- **修正**: スプリント（40ライン）、マラソン（200ライン）、ウルトラ（無制限）などのゲームモードを選択できるUIを追加。

### 27. ピースのプレビュー拡張のUI
**場所**: `src/renderer.ts:160`
- ネクストピースが1つしか表示されない
- **修正**: 次の3つのピースを表示するUIを追加。より先のピースを確認できるようにする。

### 28. ボードの背景カスタマイズのUI
**場所**: `src/renderer.ts:18`
- ボードの背景が固定されている
- **修正**: ボードの背景色やパターンをカスタマイズできるUIを追加。複数のプリセットから選択可能。

### 29. オートリプレイ設定のUI
**場所**: `新規実装`
- オートリプレイ設定がUIから変更できない
- **修正**: オートリプレイ機能の有効/無効を設定できるUIを追加。

### 30. テーマカスタマイズ機能
**場所**: `新規実装`
- ゲームのテーマが固定されている
- **修正**: ダークモード、ライトモード、カスタムカラーテーマを選択できる機能を追加。

### 31. フォントサイズの調整機能
**場所**: `styles/main.css:1`
- フォントサイズが固定されている
- **修正**: UIのフォントサイズを調整できる機能を追加。アクセシビリティを向上。

### 32. コントラスト調整機能
**場所**: `src/renderer.ts:18`
- コントラストが固定されている
- **修正**: 画面のコントラストを調整できる機能を追加。視認性を向上。

### 33. アニメーション速度の調整
**場所**: `src/renderer.ts:1`
- アニメーション速度が固定されている
- **修正**: アニメーション速度を調整できる機能を追加。パフォーマンスと視認性のバランスを調整。

### 34. サウンドエフェクトの個別調整
**場所**: `新規実装`
- サウンドエフェクトの音量が個別に調整できない
- **修正**: 各サウンドエフェクト（ピース移動、回転、落下、ライン消去など）の音量を個別に調整できる機能を追加。

### 35. キーリピート速度の調整UI
**場所**: `src/input.ts:17`
- キーリピート速度がUIから調整できない
- **修正**: キーリピートの遅延と間隔を調整できるUIを追加。

### 36. ゲーム速度の手動調整
**場所**: `src/score.ts:89`
- ゲーム速度が自動で調整されるのみ
- **修正**: ゲーム速度を手動で調整できる機能を追加。練習モードなどで活用。

### 37. ピースの色のカスタマイズ
**場所**: `src/types.ts:40`
- ピースの色が固定されている
- **修正**: 各ピースの色をカスタマイズできる機能を追加。色覚多様性に対応。

### 38. 統計データのリセット機能の改善
**場所**: `src/main.ts:200`
- 統計データのリセット機能が基本的なもののみ
- **修正**: 統計データのリセット機能を改善し、個別にリセットできるようにする。

### 39. パフォーマンス統計の表示UI改善
**場所**: `src/main.ts:150`
- パフォーマンス統計の表示が基本的なもののみ
- **修正**: パフォーマンス統計の表示を改善し、より詳細な情報を表示する。

### 40. グリッド線の表示/非表示の改善強化
**場所**: `src/renderer.ts:89`
- グリッド線の表示/非表示機能が基本的なもののみ
- **修正**: グリッド線の表示/非表示をより簡単に切り替えられる機能を追加。設定画面からも変更可能にする。

## 🚀 機能改善（20個）

### 41. リプレイ機能の実装
**場所**: `新規実装`
- ゲームのリプレイ機能がない
- **修正**: ゲームの操作履歴を記録し、後で再生できるリプレイ機能を実装。

### 42. マルチプレイヤーモード
**場所**: `新規実装`
- マルチプレイヤーモードがない
- **修正**: ローカルで2人対戦できるマルチプレイヤーモードを実装。

### 43. AI対戦モード
**場所**: `新規実装`
- AIと対戦できるモードがない
- **修正**: テトリスAIを実装し、プレイヤーがAIと対戦できるモードを追加。AIの難易度も設定可能。

### 44. チュートリアルモード
**場所**: `新規実装`
- 初心者向けのチュートリアルがない
- **修正**: 基本的な操作を学べるチュートリアルモードを実装。

### 45. プラクティスモード
**場所**: `新規実装`
- 練習用のモードがない
- **修正**: ピースを自由に配置して練習できるプラクティスモードを実装。

### 46. チャレンジモード
**場所**: `新規実装`
- 特定の課題に挑戦するモードがない
- **修正**: 特定の課題（例: 10ラインを最短時間で消去）に挑戦できるチャレンジモードを実装。

### 47. デイリーチャレンジ
**場所**: `新規実装`
- 毎日のチャレンジがない
- **修正**: 毎日異なる課題に挑戦できるデイリーチャレンジ機能を実装。

### 48. アチーブメントシステム
**場所**: `新規実装`
- アチーブメントシステムがない
- **修正**: 特定の条件を達成するとアチーブメントを獲得できるシステムを実装。

### 49. リーダーボード機能
**場所**: `新規実装`
- オンラインのリーダーボードがない
- **修正**: オンラインでスコアを競い合えるリーダーボード機能を実装（オプション）。

### 50. ゲームの共有機能
**場所**: `新規実装`
- ゲーム結果を共有する機能がない
- **修正**: ゲーム結果を画像やテキストで共有できる機能を実装。

### 51. カスタムピースの作成
**場所**: `新規実装`
- カスタムピースを作成する機能がない
- **修正**: ユーザーが独自のピース形状を作成できる機能を実装。

### 52. カスタムボードサイズ
**場所**: `src/types.ts:36`
- ボードサイズが固定されている
- **修正**: ボードの幅と高さをカスタマイズできる機能を実装。

### 53. 重力のカスタマイズ
**場所**: `src/game.ts:295`
- 重力が固定されている
- **修正**: 重力の強さをカスタマイズできる機能を実装。逆重力モードなども追加。

### 54. ピースの出現位置のカスタマイズ
**場所**: `src/game.ts:53`
- ピースの出現位置が固定されている
- **修正**: ピースの出現位置をカスタマイズできる機能を実装。

### 55. ロック遅延のカスタマイズ
**場所**: `src/game.ts:23`
- ロック遅延が固定されている
- **修正**: ロック遅延の時間をカスタマイズできる機能を実装。

### 56. 無限ホールドモード
**場所**: `src/game.ts:214`
- ホールドは1回のピースにつき1回のみ
- **修正**: ホールドを何度でも使用できる無限ホールドモードを実装。

### 57. 20Gモード
**場所**: `新規実装`
- 20G（最速落下）モードがない
- **修正**: ピースが最速で落下する20Gモードを実装。

### 58. クリア条件のカスタマイズ
**場所**: `新規実装`
- ゲームのクリア条件が固定されている
- **修正**: クリア条件（ライン数、スコア、時間など）をカスタマイズできる機能を実装。

### 59. ピースの出現確率の調整
**場所**: `src/pieces.ts:149`
- ピースの出現確率が均等
- **修正**: ピースの出現確率を調整できる機能を実装。

### 60. スコア計算式のカスタマイズ
**場所**: `src/score.ts:24`
- スコア計算式が固定されている
- **修正**: スコア計算式をカスタマイズできる機能を実装。

## 🐛 バグ修正（20個）

### 61. ピース回転時の衝突判定の不具合
**場所**: `src/pieces.ts:1`
- 特定の状況でピースが回転できない、または不適切な位置に回転する
- **修正**: SRS（Super Rotation System）の実装を確認し、全ての回転パターンで正しく動作するように修正。

### 62. スコア表示の更新バグ
**場所**: `src/renderer.ts:240`
- 特定の条件下でスコア表示が正しく更新されない、または遅延する
- **修正**: スコア更新ロジックとUI更新ロジックを分離し、スコアが変更されたら即座にUIが更新されるようにイベント駆動型にする。

### 63. カウントダウン中のゲーム状態
**場所**: `src/main.ts:97`
- カウントダウン中にゲームが開始されてしまう
- **修正**: カウントダウン中はゲームを開始せず、カウントダウン完了後に開始するように修正。

### 64. ピース生成時の重複チェック強化
**場所**: `src/game.ts:53`
- ピース生成時の重複チェックが基本的なもののみ
- **修正**: ピース生成時の重複チェックを強化し、より確実に重複を防ぐ。

### 65. フレームレートの低下時の動作改善
**場所**: `src/main.ts:334`
- フレームレートの低下時の動作が基本的なもののみ
- **修正**: フレームレートの低下時の動作を改善し、より適切に対処する。

### 66. Canvasのリサイズ時の描画問題改善
**場所**: `src/renderer.ts:30`
- Canvasのリサイズ時の描画問題が基本的なもののみ
- **修正**: Canvasのリサイズ時の描画問題を改善し、より適切に再描画する。

### 67. ローカルストレージの容量制限対策強化
**場所**: `src/main.ts:200`
- ローカルストレージの容量制限対策が基本的なもののみ
- **修正**: ローカルストレージの容量制限対策を強化し、より効率的にデータを管理する。

### 68. イベントリスナーの重複登録対策強化
**場所**: `src/input.ts:39`
- イベントリスナーの重複登録対策が基本的なもののみ
- **修正**: イベントリスナーの重複登録対策を強化し、より確実に重複を防ぐ。

### 69. ゲーム状態の不整合対策強化
**場所**: `src/game.ts:19`
- ゲーム状態の不整合対策が基本的なもののみ
- **修正**: ゲーム状態の不整合対策を強化し、より確実に不整合を防ぐ。

### 70. ピース固定時のタイミング問題対策強化
**場所**: `src/game.ts:252`
- ピース固定時のタイミング問題対策が基本的なもののみ
- **修正**: ピース固定時のタイミング問題対策を強化し、より正確にタイミングを管理する。

### 71. ライン消去アニメーションの同期問題対策強化
**場所**: `src/game.ts:264`
- ライン消去アニメーションの同期問題対策が基本的なもののみ
- **修正**: ライン消去アニメーションの同期問題対策を強化し、より正確に同期を管理する。

### 72. ゴーストピース計算のパフォーマンス問題対策強化
**場所**: `src/renderer.ts:185`
- ゴーストピース計算のパフォーマンス問題対策が基本的なもののみ
- **修正**: ゴーストピース計算のパフォーマンス問題対策を強化し、より効率的に計算する。

### 73. メモリリークの継続的な改善強化
**場所**: `src/renderer.ts:49`
- メモリリークの継続的な改善が基本的なもののみ
- **修正**: メモリリークの継続的な改善を強化し、より効率的にメモリを管理する。

### 74. レベルアップ時の落下速度の不整合対策強化
**場所**: `src/score.ts:19`
- レベルアップ時の落下速度の不整合対策が基本的なもののみ
- **修正**: レベルアップ時の落下速度の不整合対策を強化し、より確実に更新する。

### 75. スコアのオーバーフロー対策強化
**場所**: `src/score.ts:42`
- スコアのオーバーフロー対策が基本的なもののみ
- **修正**: スコアのオーバーフロー対策を強化し、より確実にオーバーフローを防ぐ。

### 76. キー入力の重複処理対策強化
**場所**: `src/input.ts:100`
- キー入力の重複処理対策が基本的なもののみ
- **修正**: キー入力の重複処理対策を強化し、より確実に重複を防ぐ。

### 77. リスタート時のタイマーリセット対策強化
**場所**: `src/game.ts:36`
- リスタート時のタイマーリセット対策が基本的なもののみ
- **修正**: リスタート時のタイマーリセット対策を強化し、より確実にリセットする。

### 78. ホールド機能の連続使用バグ対策強化
**場所**: `src/game.ts:214`
- ホールド機能の連続使用バグ対策が基本的なもののみ
- **修正**: ホールド機能の連続使用バグ対策を強化し、より確実に制限する。

### 79. ゲームオーバー後のUIフリーズ対策強化
**場所**: `src/main.ts:82`
- ゲームオーバー後のUIフリーズ対策が基本的なもののみ
- **修正**: ゲームオーバー後のUIフリーズ対策を強化し、より確実にUIを有効化する。

### 80. パフォーマンス統計の更新タイミング
**場所**: `src/main.ts:150`
- パフォーマンス統計の更新タイミングが最適でない
- **修正**: パフォーマンス統計の更新タイミングを最適化し、より正確な統計を提供する。

---

**作成日**: 2024-11-23
**更新日**: 2024-11-23
**総項目数**: 80個（修正案20個、改善案20個、機能改善20個、バグ修正20個）
